<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Futures Volatility (Top 100)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f4f6f9; padding: 20px; }
        .container { max-width: 1200px; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .symbol-badge { background-color: #e9ecef; color: #495057; padding: 2px 6px; border-radius: 4px; font-size: 0.85em; font-weight: bold; margin-left: 5px; }
        .text-green { color: #198754; font-weight: bold; }
        .text-red { color: #dc3545; font-weight: bold; }
        .coin-name-th { font-size: 1.1em; font-weight: bold; color: #000; }
        .coin-name-en { font-size: 0.85em; color: #6c757d; }
    </style>
</head>
<body>

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <!-- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏õ‡πá‡∏ô 100 -->
        <h2>üöÄ 100 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç Futures ‡∏ú‡∏±‡∏ô‡∏ú‡∏ß‡∏ô (‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ó‡∏¢)</h2>
        <button onclick="fetchData()" class="btn btn-primary">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>
    
    <div id="loading" class="text-center my-4">
        <div class="spinner-border text-primary" role="status"></div>
        <br><span id="statusText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</span>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover table-bordered d-none" id="cryptoTable">
            <thead class="table-dark text-center">
                <tr>
                    <th style="width: 30%;">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç (TH/EN)</th>
                    <th>‡∏£‡∏≤‡∏Ñ‡∏≤ (USD)</th>
                    <th>1 ‡∏ä‡∏°. %</th>
                    <th>24 ‡∏ä‡∏°. %</th>
                    <th>7 ‡∏ß‡∏±‡∏ô %</th>
                    <th>‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ï‡∏•‡∏≤‡∏î (USD)</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>
</div>

<script>
    // --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API KEY ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ---
    const GOOGLE_API_KEY = "AIzaSyCC8ZSfTOhTBJySY5MZlawgb-bHjYZn1NU";

    const manualDict = {
        // --- ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° ---
        "Bitcoin": "‡∏ö‡∏¥‡∏ï‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "BTC": "‡∏ö‡∏¥‡∏ï‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "Ethereum": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏°", "ETH": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏°",
        "Tether": "‡πÄ‡∏ó‡πÄ‡∏ò‡∏≠‡∏£‡πå", "USDT": "‡πÄ‡∏ó‡πÄ‡∏ò‡∏≠‡∏£‡πå",
        "BNB": "‡∏ö‡∏µ‡πÄ‡∏≠‡πá‡∏ô‡∏ö‡∏µ",
        "Solana": "‡πÇ‡∏ã‡∏•‡∏≤‡∏ô‡πà‡∏≤", "SOL": "‡πÇ‡∏ã‡∏•‡∏≤‡∏ô‡πà‡∏≤", "Wrapped SOL": "‡πÇ‡∏ã‡∏•‡∏≤‡∏ô‡πà‡∏≤",
        "XRP": "‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡∏≠‡∏≤‡∏£‡πå‡∏û‡∏µ",
        "Dogecoin": "‡πÇ‡∏î‡∏à‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "DOGE": "‡πÇ‡∏î‡∏à‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "Cardano": "‡∏Ñ‡∏≤‡∏£‡πå‡∏î‡∏≤‡πÇ‡∏ô‡πà", "ADA": "‡∏Ñ‡∏≤‡∏£‡πå‡∏î‡∏≤‡πÇ‡∏ô‡πà",
        "Pepe": "‡πÄ‡∏õ‡πÄ‡∏õ‡πâ", "PEPE": "‡πÄ‡∏õ‡πÄ‡∏õ‡πâ",
        "River": "‡∏£‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå", "RIVER": "‡∏£‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå",
        "Canton": "‡πÅ‡∏Ñ‡∏ô‡∏ï‡∏±‡∏ô", "CC": "‡πÅ‡∏Ñ‡∏ô‡∏ï‡∏±‡∏ô",
        "Story": "‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà", "IP": "‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà",
        "Merlin Chain": "‡πÄ‡∏°‡∏≠‡∏£‡πå‡∏•‡∏¥‡∏ô ‡πÄ‡∏ä‡∏ô", "MERL": "‡πÄ‡∏°‡∏≠‡∏£‡πå‡∏•‡∏¥‡∏ô ‡πÄ‡∏ä‡∏ô",
        "Plasma": "‡∏û‡∏•‡∏≤‡∏™‡∏°‡∏≤", "XPL": "‡∏û‡∏•‡∏≤‡∏™‡∏°‡∏≤",
        "Stable": "‡∏™‡πÄ‡∏ï‡πÄ‡∏ö‡∏¥‡∏•", "STABLE": "‡∏™‡πÄ‡∏ï‡πÄ‡∏ö‡∏¥‡∏•",
        "Chiliz": "‡∏ä‡∏¥‡∏•‡∏•‡∏¥‡∏ã", "CHZ": "‡∏ä‡∏¥‡∏•‡∏•‡∏¥‡∏ã",
        "pippin": "‡∏û‡∏¥‡∏û‡∏û‡∏¥‡∏ô", "Pippin": "‡∏û‡∏¥‡∏û‡∏û‡∏¥‡∏ô", "PIPPIN": "‡∏û‡∏¥‡∏û‡∏û‡∏¥‡∏ô",
        "Pump.fun": "‡∏õ‡∏±‡πä‡∏°.‡∏ü‡∏±‡∏ô", "PUMP": "‡∏õ‡∏±‡πä‡∏°.‡∏ü‡∏±‡∏ô",
        "Zcash": "‡∏ã‡∏µ‡πÅ‡∏Ñ‡∏ä", "ZEC": "‡∏ã‡∏µ‡πÅ‡∏Ñ‡∏ä",
        "Filecoin": "‡πÑ‡∏ü‡∏•‡πå‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "FIL": "‡πÑ‡∏ü‡∏•‡πå‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "Monad": "‡πÇ‡∏°‡∏ô‡∏≤‡∏î", "MON": "‡πÇ‡∏°‡∏ô‡∏≤‡∏î",
        "MemeCore": "‡∏°‡∏µ‡∏°‡∏Ñ‡∏≠‡∏£‡πå", "M": "‡∏°‡∏µ‡∏°‡∏Ñ‡∏≠‡∏£‡πå",
        "Polkadot": "‡πÇ‡∏û‡∏•‡∏Å‡∏≤‡∏î‡∏≠‡∏ï", "DOT": "‡πÇ‡∏û‡∏•‡∏Å‡∏≤‡∏î‡∏≠‡∏ï",
        "Pendle": "‡πÄ‡∏û‡∏ô‡πÄ‡∏î‡∏¥‡∏•", "PENDLE": "‡πÄ‡∏û‡∏ô‡πÄ‡∏î‡∏¥‡∏•",
        "Midnight": "‡∏°‡∏¥‡∏î‡πÑ‡∏ô‡∏ó‡πå", "NIGHT": "‡∏°‡∏¥‡∏î‡πÑ‡∏ô‡∏ó‡πå",
        "Render": "‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå", "RENDER": "‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå",
        "Optimism": "‡∏≠‡∏≠‡∏õ‡∏ï‡∏¥‡∏°‡∏¥‡∏ã‡∏∂‡∏°", "OP": "‡∏≠‡∏≠‡∏õ‡∏ï‡∏¥‡∏°‡∏¥‡∏ã‡∏∂‡∏°",
        "Tezos": "‡πÄ‡∏ó‡∏ã‡∏≠‡∏™", "XTZ": "‡πÄ‡∏ó‡∏ã‡∏≠‡∏™",
        "Toncoin": "‡∏ó‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "TON": "‡∏ó‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "MYX Finance": "MYX ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå", "MYX": "MYX ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå",
        "Humanity": "‡∏Æ‡∏¥‡∏ß‡πÅ‡∏°‡∏ô‡∏ô‡∏¥‡∏ï‡∏µ‡πâ", "H": "‡∏Æ‡∏¥‡∏ß‡πÅ‡∏°‡∏ô‡∏ô‡∏¥‡∏ï‡∏µ‡πâ",
        "Sky": "‡∏™‡∏Å‡∏≤‡∏¢", "SKY": "‡∏™‡∏Å‡∏≤‡∏¢",
        "Sonic": "‡πÇ‡∏ã‡∏ô‡∏¥‡∏Ñ", "S": "‡πÇ‡∏ã‡∏ô‡∏¥‡∏Ñ",
        "Aptos": "‡πÅ‡∏≠‡∏õ‡∏ó‡∏≠‡∏™", "APT": "‡πÅ‡∏≠‡∏õ‡∏ó‡∏≠‡∏™",
        "Dash": "‡πÅ‡∏î‡∏ä", "DASH": "‡πÅ‡∏î‡∏ä",
        "Lido DAO": "‡∏•‡∏¥‡πÇ‡∏î DAO", "LDO": "‡∏•‡∏¥‡πÇ‡∏î DAO",
        "Ether.fi": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏£‡πå.‡πÑ‡∏ü", "ETHFI": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏£‡πå.‡πÑ‡∏ü",
        "Trust Wallet": "‡∏ó‡∏£‡∏±‡∏™‡∏ï‡πå ‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡πá‡∏ï", "TWT": "‡∏ó‡∏£‡∏±‡∏™‡∏ï‡πå ‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡πá‡∏ï",
        "PancakeSwap": "‡πÅ‡∏û‡∏ô‡πÄ‡∏Ñ‡πâ‡∏Å‡∏™‡∏ß‡∏≠‡∏õ", "CAKE": "‡πÅ‡∏û‡∏ô‡πÄ‡∏Ñ‡πâ‡∏Å‡∏™‡∏ß‡∏≠‡∏õ",
        "Celestia": "‡πÄ‡∏ã‡πÄ‡∏•‡∏™‡πÄ‡∏ó‡∏µ‡∏¢", "TIA": "‡πÄ‡∏ã‡πÄ‡∏•‡∏™‡πÄ‡∏ó‡∏µ‡∏¢",
        "Avalanche": "‡∏≠‡∏∞‡∏ß‡∏≤‡πÅ‡∏•‡∏ô‡∏ã‡πå", "AVAX": "‡∏≠‡∏∞‡∏ß‡∏≤‡πÅ‡∏•‡∏ô‡∏ã‡πå",
        "Arweave": "‡∏≠‡∏≤‡∏£‡πå‡∏ß‡∏µ‡∏ü", "AR": "‡∏≠‡∏≤‡∏£‡πå‡∏ß‡∏µ‡∏ü",
        "ZKsync": "‡∏ã‡∏µ‡πÄ‡∏Ñ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå", "ZK": "‡∏ã‡∏µ‡πÄ‡∏Ñ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå",
        "Decentraland": "‡∏î‡∏µ‡πÄ‡∏ã‡πá‡∏ô‡∏ó‡∏£‡∏±‡∏•‡πÅ‡∏•‡∏ô‡∏î‡πå", "MANA": "‡∏î‡∏µ‡πÄ‡∏ã‡πá‡∏ô‡∏ó‡∏£‡∏±‡∏•‡πÅ‡∏•‡∏ô‡∏î‡πå",
        "Bittensor": "‡∏ö‡∏¥‡∏ï‡πÄ‡∏ó‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå", "TAO": "‡∏ö‡∏¥‡∏ï‡πÄ‡∏ó‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå",
        "Morpho": "‡∏°‡∏≠‡∏£‡πå‡πÇ‡∏ü", "MORPHO": "‡∏°‡∏≠‡∏£‡πå‡πÇ‡∏ü",
        "NEAR Protocol": "‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå ‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•", "NEAR": "‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå ‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•",
        "Pudgy Penguins": "‡∏û‡∏±‡∏î‡∏à‡∏µ‡πâ ‡πÄ‡∏û‡∏ô‡∏Å‡∏ß‡∏¥‡∏ô‡∏™‡πå", "PENGU": "‡∏û‡∏±‡∏î‡∏à‡∏µ‡πâ ‡πÄ‡∏û‡∏ô‡∏Å‡∏ß‡∏¥‡∏ô‡∏™‡πå",
        "Monero": "‡πÇ‡∏°‡πÄ‡∏ô‡πÇ‡∏£", "XMR": "‡πÇ‡∏°‡πÄ‡∏ô‡πÇ‡∏£",
        "Ethena": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏ô‡∏≤", "ENA": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏ô‡∏≤",
        "Maple Finance": "‡πÄ‡∏°‡πÄ‡∏õ‡∏¥‡∏• ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå", "SYRUP": "‡πÄ‡∏°‡πÄ‡∏õ‡∏¥‡∏• ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå",
        "SPX6900": "SPX6900", "SPX": "SPX6900",
        "Sui": "‡∏ã‡∏∏‡∏¢", "SUI": "‡∏ã‡∏∏‡∏¢",
        "dogwifhat": "‡∏î‡πá‡∏≠‡∏Å‡∏ß‡∏¥‡∏ü‡πÅ‡∏Æ‡∏ó", "WIF": "‡∏î‡πá‡∏≠‡∏Å‡∏ß‡∏¥‡∏ü‡πÅ‡∏Æ‡∏ó",
        "Worldcoin": "‡πÄ‡∏ß‡∏¥‡∏•‡∏î‡πå‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "WLD": "‡πÄ‡∏ß‡∏¥‡∏•‡∏î‡πå‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "Vaulta": "‡∏ß‡∏≠‡∏•‡∏ï‡πâ‡∏≤", "A": "‡∏ß‡∏≠‡∏•‡∏ï‡πâ‡∏≤",
        "Sei": "‡πÄ‡∏ã‡∏¢‡πå", "SEI": "‡πÄ‡∏ã‡∏¢‡πå",
        "World Liberty Financial": "‡πÄ‡∏ß‡∏¥‡∏•‡∏î‡πå ‡∏•‡∏¥‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏µ‡πâ ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå", "WLFI": "‡πÄ‡∏ß‡∏¥‡∏•‡∏î‡πå ‡∏•‡∏¥‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏µ‡πâ ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå",
        "LayerZero": "‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡∏ã‡∏µ‡πÇ‡∏£‡πà", "ZRO": "‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡∏ã‡∏µ‡πÇ‡∏£‡πà",
        "Quant": "‡∏Ñ‡∏ß‡∏≠‡∏ô‡∏ï‡πå", "QNT": "‡∏Ñ‡∏ß‡∏≠‡∏ô‡∏ï‡πå",
        "Theta Network": "‡∏ò‡∏µ‡∏ï‡πâ‡∏≤ ‡πÄ‡∏ô‡πá‡∏ï‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å", "THETA": "‡∏ò‡∏µ‡∏ï‡πâ‡∏≤ ‡πÄ‡∏ô‡πá‡∏ï‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å",
        "Arbitrum": "‡∏≠‡∏≤‡∏£‡πå‡∏ö‡∏¥‡∏ó‡∏£‡∏±‡∏°", "ARB": "‡∏≠‡∏≤‡∏£‡πå‡∏ö‡∏¥‡∏ó‡∏£‡∏±‡∏°",
        "Stacks": "‡∏™‡πÅ‡∏ï‡πá‡∏Å‡∏™‡πå", "STX": "‡∏™‡πÅ‡∏ï‡πá‡∏Å‡∏™‡πå",
        "Bitcoin SV": "‡∏ö‡∏¥‡∏ï‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå SV", "BSV": "‡∏ö‡∏¥‡∏ï‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå SV",
        "JUST": "‡∏à‡∏±‡∏™‡∏ó‡πå", "JST": "‡∏à‡∏±‡∏™‡∏ó‡πå",
        "Chainlink": "‡πÄ‡∏ä‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå", "LINK": "‡πÄ‡∏ä‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå",
        "VeChain": "‡∏ß‡∏µ‡πÄ‡∏ä‡∏ô", "VET": "‡∏ß‡∏µ‡πÄ‡∏ä‡∏ô",
        "Aster": "‡πÅ‡∏≠‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå", "ASTER": "‡πÅ‡∏≠‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå",
        "Hedera": "‡πÄ‡∏Æ‡πÄ‡∏î‡∏£‡∏≤", "HBAR": "‡πÄ‡∏Æ‡πÄ‡∏î‡∏£‡∏≤",
        "Fartcoin": "‡∏ü‡∏≤‡∏£‡πå‡∏ó‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "FARTCOIN": "‡∏ü‡∏≤‡∏£‡πå‡∏ó‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "Compound": "‡∏Ñ‡∏≠‡∏°‡∏õ‡∏≤‡∏ß‡∏î‡πå", "COMP": "‡∏Ñ‡∏≠‡∏°‡∏õ‡∏≤‡∏ß‡∏î‡πå",
        "PAX Gold": "‡πÅ‡∏û‡∏Å‡∏ã‡πå ‡πÇ‡∏Å‡∏•‡∏î‡πå", "PAXG": "‡πÅ‡∏û‡∏Å‡∏ã‡πå ‡πÇ‡∏Å‡∏•‡∏î‡πå",
        "Ondo": "‡∏≠‡∏≠‡∏ô‡πÇ‡∏î", "ONDO": "‡∏≠‡∏≠‡∏ô‡πÇ‡∏î",
        "Kaspa": "‡∏Ñ‡∏≤‡∏™‡∏õ‡∏≤", "KAS": "‡∏Ñ‡∏≤‡∏™‡∏õ‡∏≤",
        "Conflux": "‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏•‡∏±‡∏Å‡∏ã‡πå", "CFX": "‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏•‡∏±‡∏Å‡∏ã‡πå",
        "Artificial Superintelligence Alliance": "‡∏≠‡∏≤‡∏£‡πå‡∏ï‡∏¥‡∏ü‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏• ‡∏ã‡∏π‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏•‡∏•‡∏¥‡πÄ‡∏à‡∏ô‡∏ã‡πå ‡∏≠‡∏±‡∏•‡πÑ‡∏•‡πÅ‡∏≠‡∏ô‡∏ã‡πå", "FET": "‡∏≠‡∏≤‡∏£‡πå‡∏ï‡∏¥‡∏ü‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏• ‡∏ã‡∏π‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏•‡∏•‡∏¥‡πÄ‡∏à‡∏ô‡∏ã‡πå ‡∏≠‡∏±‡∏•‡πÑ‡∏•‡πÅ‡∏≠‡∏ô‡∏ã‡πå",
        "Stellar": "‡∏™‡πÄ‡∏ï‡∏•‡∏•‡∏≤‡∏£‡πå", "XLM": "‡∏™‡πÄ‡∏ï‡∏•‡∏•‡∏≤‡∏£‡πå",
        "Uniswap": "‡∏¢‡∏π‡∏ô‡∏¥‡∏™‡∏ß‡∏≠‡∏õ", "UNI": "‡∏¢‡∏π‡∏ô‡∏¥‡∏™‡∏ß‡∏≠‡∏õ",
        "Cosmos Hub": "‡∏Ñ‡∏≠‡∏™‡∏°‡∏≠‡∏™ ‡∏Æ‡∏±‡∏ö", "ATOM": "‡∏Ñ‡∏≠‡∏™‡∏°‡∏≠‡∏™ ‡∏Æ‡∏±‡∏ö",
        "Ethereum Name Service": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏° ‡πÄ‡∏ô‡∏° ‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ß‡∏¥‡∏™", "ENS": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏° ‡πÄ‡∏ô‡∏° ‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ß‡∏¥‡∏™",
        "DoubleZero": "‡∏î‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡∏•‡∏ã‡∏µ‡πÇ‡∏£‡πà", "2Z": "‡∏î‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡∏•‡∏ã‡∏µ‡πÇ‡∏£‡πà",
        "The Sandbox": "‡πÄ‡∏î‡∏≠‡∏∞ ‡πÅ‡∏ã‡∏ô‡∏î‡πå‡∏ö‡πá‡∏≠‡∏Å‡∏ã‡πå", "SAND": "‡πÄ‡∏î‡∏≠‡∏∞ ‡πÅ‡∏ã‡∏ô‡∏î‡πå‡∏ö‡πá‡∏≠‡∏Å‡∏ã‡πå",
        "Litecoin": "‡πÑ‡∏•‡∏ó‡πå‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "LTC": "‡πÑ‡∏•‡∏ó‡πå‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "Algorand": "‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡πÅ‡∏£‡∏ô‡∏î‡πå", "ALGO": "‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡πÅ‡∏£‡∏ô‡∏î‡πå",
        "Binance-Peg Dogecoin": "‡πÑ‡∏ö‡πÅ‡∏ô‡∏ô‡∏ã‡πå-‡πÄ‡∏û‡∏Å ‡πÇ‡∏î‡∏ä‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå",
        "Starknet": "‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏Ñ‡πÄ‡∏ô‡πá‡∏ï", "STRK": "‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏Ñ‡πÄ‡∏ô‡πá‡∏ï",
        "IOTA": "‡πÑ‡∏≠‡πÇ‡∏≠‡∏ó‡∏µ‡πÄ‡∏≠",
        "Aerodrome Finance": "‡πÅ‡∏≠‡πÇ‡∏£‡πÇ‡∏î‡∏£‡∏° ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå", "AERO": "‡πÅ‡∏≠‡πÇ‡∏£‡πÇ‡∏î‡∏£‡∏° ‡πÑ‡∏ü‡πÅ‡∏ô‡∏ô‡∏ã‡πå",
        "TRON": "‡∏ó‡∏£‡∏≠‡∏ô", "TRX": "‡∏ó‡∏£‡∏≠‡∏ô",
        "POL (ex-MATIC)": "POL (‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå-‡∏°‡∏≤‡∏ï‡∏¥‡∏Å)", "POL": "POL (‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå-‡∏°‡∏≤‡∏ï‡∏¥‡∏Å)",
        "Bitcoin Cash": "‡∏ö‡∏¥‡∏ï‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå ‡πÅ‡∏Ñ‡∏ä", "BCH": "‡∏ö‡∏¥‡∏ï‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå ‡πÅ‡∏Ñ‡∏ä",
        "Injective": "‡∏≠‡∏¥‡∏ô‡πÄ‡∏à‡∏Ñ‡∏ó‡∏µ‡∏ü", "INJ": "‡∏≠‡∏¥‡∏ô‡πÄ‡∏à‡∏Ñ‡∏ó‡∏µ‡∏ü",
        "GALA": "‡∏Å‡∏≤‡∏•‡πà‡∏≤",
        "Ethereum Classic": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏° ‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏¥‡∏Å", "ETC": "‡∏≠‡∏µ‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏° ‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏¥‡∏Å",
        "Basic Attention": "‡πÄ‡∏ö‡∏™‡∏¥‡∏Å ‡πÅ‡∏≠‡∏ó‡πÄ‡∏ó‡∏ô‡∏ä‡∏±‡∏ô", "BAT": "‡πÄ‡∏ö‡∏™‡∏¥‡∏Å ‡πÅ‡∏≠‡∏ó‡πÄ‡∏ó‡∏ô‡∏ä‡∏±‡∏ô",
        "Pyth Network": "‡πÑ‡∏û‡∏ò ‡πÄ‡∏ô‡πá‡∏ï‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å", "PYTH": "‡πÑ‡∏û‡∏ò ‡πÄ‡∏ô‡πá‡∏ï‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å",
        "The Graph": "‡πÄ‡∏î‡∏≠‡∏∞ ‡∏Å‡∏£‡∏≤‡∏ü", "GRT": "‡πÄ‡∏î‡∏≠‡∏∞ ‡∏Å‡∏£‡∏≤‡∏ü",
        "NEO": "‡∏ô‡∏µ‡πÇ‡∏≠",
        "Aave": "‡∏≠‡∏≤‡πÄ‡∏ß‡πà", "AAVE": "‡∏≠‡∏≤‡πÄ‡∏ß‡πà",
        "Hyperliquid": "‡πÑ‡∏Æ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏•‡∏¥‡∏Ñ‡∏ß‡∏¥‡∏î", "HYPE": "‡πÑ‡∏Æ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏•‡∏¥‡∏Ñ‡∏ß‡∏¥‡∏î",
        "Official Trump": "‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏• ‡∏ó‡∏£‡∏±‡∏°‡∏õ‡πå", "TRUMP": "‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏• ‡∏ó‡∏£‡∏±‡∏°‡∏õ‡πå",
        "Virtuals Protocol": "‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏ß‡∏•‡∏™‡πå ‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•", "VIRTUAL": "‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏ß‡∏•‡∏™‡πå ‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•",
        "JasmyCoin": "‡πÅ‡∏à‡∏™‡∏°‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå", "JASMY": "‡πÅ‡∏à‡∏™‡∏°‡∏µ‡πà‡∏Ñ‡∏≠‡∏¢‡∏ô‡πå"
    };

    const fmt = (num) => num ? num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : '-';
    const fmtPct = (num) => {
        if (num === null || num === undefined) return '-';
        return `<span class="${num >= 0 ? 'text-green' : 'text-red'}">${num.toFixed(2)}%</span>`;
    };

    function getThaiName(name, symbol) {
        const cleanName = name ? name.trim() : "";
        const cleanSymbol = symbol ? symbol.toUpperCase().trim() : "";
        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°
        if (manualDict[cleanName]) return manualDict[cleanName];
        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏±‡∏ß‡∏¢‡πà‡∏≠ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡∏ó‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÅ‡∏ï‡πà‡∏ï‡∏±‡∏ß‡∏¢‡πà‡∏≠‡∏°‡∏µ‡πÉ‡∏ô dict)
        if (manualDict[cleanSymbol]) return manualDict[cleanSymbol];
        return null;
    }

    async function translateWithGemini(namesToTranslate) {
        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏• (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏≤‡∏Å fetchData) ‡∏Å‡πá‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏•‡∏¢
        if (!namesToTranslate || namesToTranslate.length === 0) return {};

        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GOOGLE_API_KEY}`;
        const prompt = `
        Translate these Cryptocurrency names into Thai (Thai script only).
        Return valid JSON: {"EnglishName": "ThaiName"}.
        List: ${namesToTranslate.join(", ")}
        `;

        try {
            const response = await fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: { response_mime_type: "application/json" }
                })
            });
            const data = await response.json();
            if (data.candidates && data.candidates[0].content) {
                return JSON.parse(data.candidates[0].content.parts[0].text);
            }
        } catch (error) {
            console.error("AI Error:", error);
        }
        return {};
    }

    async function fetchData() {
        const loadingDiv = document.getElementById('loading');
        const statusText = document.getElementById('statusText');
        const table = document.getElementById('cryptoTable');
        const tbody = document.getElementById('tableBody');

        loadingDiv.style.display = 'block';
        table.classList.add('d-none');
        tbody.innerHTML = '';
        
        try {
            statusText.innerText = "1/3 ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Binance Futures...";
            const binanceRes = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');
            const binanceData = await binanceRes.json();
            const futuresSymbols = new Set(binanceData.symbols.filter(s => s.status === 'TRADING' && s.quoteAsset === 'USDT').map(s => s.baseAsset.toUpperCase()));

            statusText.innerText = "2/3 ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å CoinGecko...";
            const cgRes = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1&sparkline=false&price_change_percentage=1h,24h,7d');
            const cgData = await cgRes.json();

            let filteredData = cgData.filter(coin => futuresSymbols.has(coin.symbol.toUpperCase()));
            filteredData.forEach(coin => coin.abs_7d = Math.abs(coin.price_change_percentage_7d_in_currency || 0));
            filteredData.sort((a, b) => b.abs_7d - a.abs_7d);
            
            const top100 = filteredData.slice(0, 100);

            statusText.innerText = "3/3 ‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (Manual + AI)...";
            
            // --- LOGIC ‡πÉ‡∏´‡∏°‡πà: ‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á AI ---
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ getThaiName (‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞ Symbol) ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô null ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ (‡∏°‡∏µ‡πÉ‡∏ô dict) -> ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á
            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô dict) -> ‡∏™‡πà‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡πÅ‡∏õ‡∏•
            const namesToTranslate = top100
                .filter(coin => !getThaiName(coin.name, coin.symbol))
                .map(coin => coin.name);

            // ‡∏™‡πà‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô dict ‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÑ‡∏õ‡πÉ‡∏´‡πâ AI
            let aiTranslatedMap = {};
            if (namesToTranslate.length > 0) {
                console.log(`Sending ${namesToTranslate.length} names to AI...`); // ‡πÑ‡∏ß‡πâ‡∏î‡∏π log ‡∏ß‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏õ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà
                aiTranslatedMap = await translateWithGemini(namesToTranslate);
            } else {
                console.log("All names found in Manual Dictionary. No AI needed.");
            }

            top100.forEach(coin => {
                // ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠:
                // 1. Manual Dict (‡∏ú‡πà‡∏≤‡∏ô getThaiName ‡∏ã‡∏∂‡πà‡∏á‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞ Symbol)
                // 2. AI Result (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô manual)
                // 3. ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏î‡∏¥‡∏°
                const thaiName = getThaiName(coin.name, coin.symbol) || 
                                 aiTranslatedMap[coin.name] || 
                                 coin.name;

                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="text-start align-middle">
                        <div class="d-flex align-items-center">
                            <img src="${coin.image}" width="24" height="24" class="me-2 rounded-circle" alt="">
                            <div>
                                <div class="coin-name-th">${thaiName}</div>
                                <div class="coin-name-en">
                                    ${coin.name} 
                                    <span class="symbol-badge">${coin.symbol.toUpperCase()}</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="text-end align-middle">${fmt(coin.current_price)}</td>
                    <td class="text-end align-middle">${fmtPct(coin.price_change_percentage_1h_in_currency)}</td>
                    <td class="text-end align-middle">${fmtPct(coin.price_change_percentage_24h_in_currency)}</td>
                    <td class="text-end align-middle">${fmtPct(coin.price_change_percentage_7d_in_currency)}</td>
                    <td class="text-end align-middle">${fmt(coin.market_cap)}</td>
                `;
                tbody.appendChild(tr);
            });

            loadingDiv.style.display = 'none';
            table.classList.remove('d-none');

        } catch (error) {
            console.error(error);
            loadingDiv.innerHTML = `<span class="text-danger">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}</span>`;
        }
    }

    fetchData();
</script>

</body>
</html>